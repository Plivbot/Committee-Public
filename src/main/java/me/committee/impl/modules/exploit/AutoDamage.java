package me.committee.impl.modules.exploit;

import me.committee.api.eventsystem.annotation.EventSubscribe;
import me.committee.api.module.Module;
import me.committee.impl.event.events.player.PlayerUpdateEvent;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.util.math.BlockPos;

public class AutoDamage extends Module {

    public AutoDamage() {
        super("AutoDamage", new String[]{"SelfDamage"}, "Spamming this on and off causes NCP to damage you.", Category.EXPLOIT);
    }

    private BlockPos blockPos;

    @Override
    public void onEnable() {
        super.onEnable();
        if (mc.player == null) {
            this.setEnabled(false);
            return;
        }
        this.blockPos = new BlockPos(mc.player.posX, mc.player.posY, mc.player.posZ);
        mc.player.jump();
    }

    @EventSubscribe
    public void onUpdate(PlayerUpdateEvent event) {
        if (mc.player.posY > blockPos.getY() + 1.05) {
            mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY - 9, mc.player.posZ, false));
        }
    }

}
